<%= render partial: "elements/header-auth.html.erb" %>

<h2 class="page-header"><%=@cycle.title.capitalize%> good habits</h2>

<h3>test animated modal here</h3>

<% @good_habits.each do |habit| %>
<div class="good-habit-infos">
  <h5>Title : <%= habit.title %></h5>

  <div class="special-checkboxes">

    <% habit.checkpoints.sort {|a,b| a.id <=> b.id}.each do|checkpoint| %>

    <div class="checkboxe-element">
    <%= form_for habit, url: user_cycle_good_habit_checkpoint_path(@user.id, @cycle.title, habit.id, checkpoint.id), method: "PUT", remote: true do |form|%>

      <div class="checkpoint-data-<%= checkpoint.id %>" id="checkpoint">
      <%= checkpoint.id %>
      <% if checkpoint.checked == false %>
   
        <%= form.submit 'X',  class: 'btn-submit-danger'%>

      <% elsif checkpoint.checked == true %>

      <%= form.submit 'Y',  class: 'btn-submit-success' %>

      <% end %>
      </div >
 
      
    <% end %>

    </div>
  <% end %>
  </div>

  <p> il y a <%= habit.announced_checkpoints - habit.checkpoints.where(checked: true).count %> checkpoints restants </p>
  <p> il y a <%= habit.checkpoints.where(checked: true).count %> checkpoints successed </p>

</div>
<% end %>


<%= javascript_pack_tag 'index_gh'%>